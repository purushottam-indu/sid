import{aN as e,r as t,aO as xt,aP as $e,aQ as gt,aR as ft,aS as _t,aT as ze,aU as yt,aV as _e,aW as ee,aX as jt,aY as wt,aZ as St,a_ as bt,a$ as le,b0 as vt,b1 as Ct,b2 as kt,b3 as Nt,b4 as T,b5 as te,b6 as ye,b7 as Tt,b8 as Et,b9 as Pt,ba as Mt,bb as Bt,bc as R,bd as L,be as Dt,bf as Re,bg as It,bh as At,bi as Ft,bj as qt,bk as zt,bl as Le,bm as Rt}from"./vendor-036f9e45.js";import{u as je,S as _,A as re,T as we,I as Se,P as Lt,a as Ot,b as $t,D as be,c as se}from"./fluentui-react-f9d96f3f.js";import{E as Qt,S as Gt,D as Ht,A as Ut,C as Xt,a as Wt}from"./fluentui-icons-2cf475f0.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))u(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function u(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();const Vt="_container_9i9ys_1",Jt="_chatRoot_9i9ys_23",Kt="_chatContainer_9i9ys_35",Yt="_cylindricalBar_9i9ys_59",Zt="_disclaimerText_9i9ys_85",es="_boxquerySuggestion_9i9ys_91",ts="_hideboxquerySuggestion_9i9ys_97",ss="_boxesContainerquerySuggestion_9i9ys_105",ns="_shrunk_9i9ys_111",os="_stopText_9i9ys_119",as="_customPromptMessageResponse_9i9ys_125",is="_chatEmptyState_9i9ys_135",rs="_customPromptMessage_9i9ys_125",ls="_loadingdots_9i9ys_229",cs="_loading_9i9ys_229",ds="_clearPrompt_9i9ys_239",us="_chatEmptyStateTitle_9i9ys_263",ps="_chatEmptyStateSubtitle_9i9ys_277",hs="_chatMessageStream_9i9ys_309",ms="_chatMessageGpt_9i9ys_333",xs="_commandButtonDisabled_9i9ys_345",gs="_chatMessageGptMinWidth_9i9ys_357",fs="_chatInput_9i9ys_367",_s="_chatAnalysisPanel_9i9ys_395",ys="_chatPromptTemplate_9i9ys_411",js="_loadingLogo_9i9ys_419",ws="_commandsContainer_9i9ys_427",Ss="_modelSelector_9i9ys_435",bs="_dropDownContainer_9i9ys_445",vs="_buttonContainer_9i9ys_451",Cs="_commandButton_9i9ys_345",ks="_upload_9i9ys_475",Ns="_appLogo_9i9ys_489",Ts="_chatTemprature_9i9ys_517",Es="_responseStyle_9i9ys_555",Ps="_temperatureButton_9i9ys_571",Ms="_clicked_9i9ys_591",Bs="_headingContainer_9i9ys_607",Ds="_heading_9i9ys_607",Is="_querytitle_9i9ys_755",As="_stopButton_9i9ys_845",Fs="_stopButtonContent_9i9ys_855",qs="_stopText1_9i9ys_967",zs="_guidelines_9i9ys_1061",n={container:Vt,chatRoot:Jt,chatContainer:Kt,cylindricalBar:Yt,disclaimerText:Zt,boxquerySuggestion:es,hideboxquerySuggestion:ts,boxesContainerquerySuggestion:ss,shrunk:ns,stopText:os,customPromptMessageResponse:as,chatEmptyState:is,customPromptMessage:rs,loadingdots:ls,loading:cs,clearPrompt:ds,chatEmptyStateTitle:us,chatEmptyStateSubtitle:ps,chatMessageStream:hs,chatMessageGpt:ms,commandButtonDisabled:xs,chatMessageGptMinWidth:gs,chatInput:fs,chatAnalysisPanel:_s,chatPromptTemplate:ys,loadingLogo:js,commandsContainer:ws,modelSelector:Ss,dropDownContainer:bs,buttonContainer:vs,commandButton:Cs,upload:ks,appLogo:Ns,chatTemprature:Ts,responseStyle:Es,temperatureButton:Ps,clicked:Ms,headingContainer:Bs,heading:Ds,querytitle:Is,stopButton:As,stopButtonContent:Fs,stopText1:qs,guidelines:zs};async function Rs(){const s=await fetch("/api/auth",{method:"GET",headers:{"Content-Type":"application/json"}}),a=await s.json();if(s.status>299||!s.ok)throw Error(a.error||"Unknown error");return a}async function Ls(s){var i,u,r,l,d,x,y,m,v,p,w;const a=s.shouldStream?"/chat_stream":"/chat";return await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({history:s.history,approach:s.approach,overrides:{retrieval_mode:(i=s.overrides)==null?void 0:i.retrievalMode,semantic_ranker:(u=s.overrides)==null?void 0:u.semanticRanker,semantic_captions:(r=s.overrides)==null?void 0:r.semanticCaptions,top:(l=s.overrides)==null?void 0:l.top,temperature:(d=s.overrides)==null?void 0:d.temperature,prompt_template:(x=s.overrides)==null?void 0:x.promptTemplate,prompt_template_prefix:(y=s.overrides)==null?void 0:y.promptTemplatePrefix,prompt_template_suffix:(m=s.overrides)==null?void 0:m.promptTemplateSuffix,exclude_category:(v=s.overrides)==null?void 0:v.excludeCategory,suggest_followup_questions:(p=s.overrides)==null?void 0:p.suggestFollowupQuestions,model_type:(w=s.overrides)==null?void 0:w.modelType}})})}async function Os(s){const a=new FormData;s.files.forEach((r,l)=>{a.append(`file${l+1}`,r)});const i=await fetch("/upload",{method:"POST",body:a}),u=await i.json();if(i.status>599)throw Error("try_after_some_time");if(i.status>499)throw Error("file_size_error");if(i.status>399)throw Error("csv_excel_error");if(i.status>299||!i.ok)throw Error(u.error||"Unknown error");if(i.status>250)throw Error("unstructured_data_already_uploaded");if(i.status>200)throw Error("csv_excel_already_present_error");return u}var Ne=(s=>(s.General="general",s.DocumentQNA="docqna",s))(Ne||{});const $s="_answerContainer_oilng_1",Qs="_answerStackItem_oilng_41",Gs="_answerLogo_oilng_49",Hs="_answerText_oilng_57",Us="_selected_oilng_95",Xs="_citationLearnMore_oilng_103",Ws="_citation_oilng_103",Vs="_followupQuestionsList_oilng_147",Js="_followupQuestionLearnMore_oilng_155",Ks="_followupQuestion_oilng_147",Ys="_supContainer_oilng_193",Zs="_retryButton_oilng_251",en="_loadingdots_oilng_295",tn="_loading_oilng_295",b={answerContainer:$s,answerStackItem:Qs,answerLogo:Gs,answerText:Hs,selected:Us,citationLearnMore:Xs,citation:Ws,followupQuestionsList:Vs,followupQuestionLearnMore:Js,followupQuestion:Ks,supContainer:Ys,retryButton:Zs,loadingdots:en,loading:tn};function sn(s){const a=[];let i=s.replace(/<<([^>>]+)>>/g,(d,x)=>(a.push(x),""));i=i.trim();const u=/```([^`]+)```/g,r=[];let l;for(;(l=u.exec(i))!==null;){const d=l[1].trim();r.push(d)}return{answerHtml:i,followupQuestions:a,codeContent:r.join("")}}const nn="/sid/assets/Daiichi_Sankyo_junior-a39ed979.png",Qe=()=>e.jsx("img",{src:nn,alt:"Daiichi Sankyo logo","max-height":"25px",height:"20px","max-width":"20px",width:"20px"}),on="/sid/assets/NotoSansJP-Regular-fb3df01b.ttf",an=({answer:s,onFollowupQuestionClicked:a,showFollowupQuestions:i,isAnswerCompleted:u,regenerateResponse:r,regenerateQuestion:l})=>{const d=t.useMemo(()=>sn(s.answer),[s]);xt.sanitize(d.answerHtml);const x=()=>{const h=new Blob([d.answerHtml],{type:"text/plain;charset=utf-8"});ze.saveAs(h,"response.txt")},y=async()=>{const h=new yt,S=20,j=S,O=S;let I=j,N=d.answerHtml;const U=6,X=h.internal.pageSize.height-j-O,A=12;h.setFontSize(A);const K=await fetch(on).then(M=>M.arrayBuffer()),Y=btoa(new Uint8Array(K).reduce((M,oe)=>M+String.fromCharCode(oe),""));h.addFileToVFS("NotoSansJP-Regular.ttf",Y),h.addFont("NotoSansJP-Regular.ttf","NotoSansJP","normal"),h.setFont("NotoSansJP");const ce=()=>{h.addPage(),I=j};h.splitTextToSize(N,h.internal.pageSize.width-2*S).forEach(M=>{I+U>X&&ce(),h.text(M,S,I),I+=U}),h.save("response.pdf")},m=h=>h.replace(/\n/g,"<br>"),v=async()=>{const h=m(d.answerHtml),S=document.createElement("div");S.innerHTML=h;const j=Array.from(S.childNodes).map(N=>{if(N.nodeType===Node.TEXT_NODE)return new _e({children:[new ee(N.textContent||"")]});if(N.nodeType===Node.ELEMENT_NODE){const U=N,X=Array.from(U.childNodes).map(A=>{if(A.nodeType===Node.TEXT_NODE)return new ee(A.textContent||"");if(A.nodeType===Node.ELEMENT_NODE){const F=A;return new ee(F.innerText)}else return new ee("")});return new _e({children:X})}else return new _e({children:[new ee("")]})}),O=new jt({sections:[{properties:{},children:j}]}),I=await wt.toBlob(O);ze.saveAs(I,"response.docx")},[p,w]=t.useState(!1);t.useState(void 0);const g=je("tooltip_pdf"),D=je("tooltip_word"),C=je("tooltip_txt"),f={root:{display:"inline-block"}};$e();const E={iconName:"WordDocument"},P={iconName:"PDF"},ne={iconName:"TextDocument"};return e.jsxs(_,{className:`${b.answerContainer}`,verticalAlign:"space-between",children:[e.jsx(_.Item,{children:e.jsxs(_,{horizontal:!0,horizontalAlign:"space-between",children:[e.jsx(Qe,{}),!u&&e.jsx(e.Fragment,{children:e.jsxs(_,{horizontal:!0,children:[e.jsx(re,{style:{color:"black"},iconProps:r?{iconName:"Refresh"}:{iconName:""},title:"Regenerate",ariaLabel:"Refresh",onClick:()=>a(l),disabled:!r}),e.jsx(re,{style:{color:"black"},iconProps:{iconName:"Copy"},title:"Copy to clipboard",ariaLabel:"Copy Code content",onClick:()=>{navigator.clipboard.writeText(d.answerHtml)},disabled:!!u}),e.jsx(re,{style:{color:"black"},iconProps:{iconName:"Download"},title:"Export",onClick:()=>w(!p)}),p&&e.jsxs(_,{horizontal:!0,tokens:{childrenGap:10},children:[e.jsx(we,{content:"PDF",id:g,styles:f,children:e.jsx("div",{children:e.jsx(Se,{style:{color:"red"},onClick:y,iconProps:P})})}),e.jsx(we,{content:"TXT",id:C,styles:f,children:e.jsx("div",{children:e.jsx(Se,{style:{color:"black"},onClick:x,iconProps:ne})})}),e.jsx(we,{content:"DOCX",id:D,styles:f,children:e.jsx("div",{children:e.jsx(Se,{style:{color:"blue"},onClick:v,iconProps:E})})})]})]})})]})}),e.jsx(_.Item,{grow:!0,className:`${b.answerStackItem}`,children:e.jsx(gt,{rehypePlugins:[ft,_t],children:d.answerHtml})}),!!d.followupQuestions.length&&i&&a&&e.jsx(_.Item,{className:`${b.answerStackItem}`,children:e.jsxs(_,{horizontal:!0,wrap:!0,className:`${b.followupQuestionsList}`,tokens:{childrenGap:6},children:[e.jsx("span",{className:b.followupQuestionLearnMore,children:"Follow-up questions:"}),d.followupQuestions.map((h,S)=>e.jsx("a",{className:b.followupQuestion,title:h,onClick:()=>a(h),children:`${h}`},S))]})})]})},rn=()=>{const s=St({from:{opacity:0},to:{opacity:1}});return e.jsx(bt.div,{style:{...s},children:e.jsxs(_,{className:b.answerContainer,verticalAlign:"space-between",children:[e.jsx(Qe,{}),e.jsx(_.Item,{grow:!0,children:e.jsxs("p",{className:b.answerText,children:["Generating answer",e.jsx("span",{className:b.loadingdots})]})})]})})},ln=({error:s,onRetry:a})=>e.jsxs(_,{className:b.answerContainer,verticalAlign:"space-between",children:[e.jsx(Qt,{"aria-hidden":"true","aria-label":"Error icon",primaryFill:"red"}),e.jsx(_.Item,{grow:!0,children:e.jsx("p",{className:b.answerText,children:s})}),e.jsx(Lt,{className:b.retryButton,onClick:a,text:"Retry"})]}),cn="_container_7708a_1",dn="_disabled_7708a_15",ve={container:cn,disabled:dn},un="/sid/assets/reset-55d752b7.png",pn=({className:s,disabled:a,onClick:i})=>e.jsx(e.Fragment,{children:e.jsx(le,{title:"Clear Chat",placement:"right",children:e.jsx("div",{className:`${ve.container} ${s??""} ${a&&ve.disabled}`,onClick:i,children:e.jsx("div",{style:{marginLeft:"15px",marginRight:"5px"},children:e.jsx("img",{src:un,alt:"Reset",className:ve.resetIcon,style:{width:"40px",height:"40px"}})})})})}),hn="_questionInputContainer_dptic_1",mn="_questionInputTextArea_dptic_23",xn="_questionInputButtonsContainer_dptic_39",gn="_questionInputSendButton_dptic_53",fn="_questionInputSendButtonDisabled_dptic_61",_n="_resetIcon_dptic_71",yn="_stopButton_dptic_79",H={questionInputContainer:hn,questionInputTextArea:mn,questionInputButtonsContainer:xn,questionInputSendButton:gn,questionInputSendButtonDisabled:fn,resetIcon:_n,stopButton:yn},Oe=({onSend:s,disabled:a,placeholder:i,clearOnSend:u,lastQuestionRef:r,clearchat:l,fileuploadelement:d})=>{const[x,y]=t.useState(""),[m,v]=t.useState("");t.useEffect(()=>{m&&y(m)},[m]);const p=()=>{a||!x.trim()||(s(x),u&&(y(""),v("")))},w=()=>{a||l()},g=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),p())},D=(E,P)=>{y(P||"")},C=a||!x.trim(),f=!r.current||a;return e.jsxs(_,{horizontal:!0,className:H.questionInputContainer,children:[a?e.jsx(e.Fragment,{children:d}):e.jsx(le,{title:"File Upload",placement:"left",children:d}),e.jsx(Ot,{className:H.questionInputTextArea,placeholder:i,multiline:!0,resizable:!1,borderless:!0,value:x,onChange:D,onKeyDown:g,disabled:!!a,style:{height:"50px",fontSize:"11px"}}),e.jsx("div",{className:H.questionInputButtonsContainer,children:e.jsx("div",{"aria-label":"Ask question button",onClick:p,children:e.jsx(le,{title:"Submit",placement:"left",children:e.jsx(Gt,{primaryFill:"rgba(0, 180, 237, 0.6)",className:`${C?H.questionInputSendButtonDisabled:""}`})})})}),e.jsx("div",{className:H.questionInputButtonsContainer,children:e.jsx(pn,{className:`${f?H.questionInputSendButtonDisabled:H.resetIcon}`,onClick:w,disabled:f})})]})},jn="_container_29yhu_1",wn="_message_29yhu_17",Ce={container:jn,message:wn},Sn=vt({key:"selectedMessage",default:""}),ke=({message:s})=>{const[a,i]=Ct(Sn),u=()=>{i(s)};return e.jsx(_,{className:`${Ce.answerContainer}`,verticalAlign:"space-between",children:e.jsx("div",{className:Ce.container,children:e.jsxs("div",{className:Ce.message,children:[e.jsx(re,{style:{color:"black",paddingRight:"15px",margin:"auto"},iconProps:{iconName:"Edit"},title:"Edit Message",onClick:u}),e.jsx("div",{style:{margin:"auto"},children:s})]})})})},bn="_container_7708a_1",vn="_disabled_7708a_15",Cn={container:bn,disabled:vn},kn=({className:s,disabled:a,onClick:i})=>e.jsx("div",{className:`${Cn.container} ${s??""}`,onClick:i,children:e.jsx(kt,{})});function Nn({open:s,fileNames:a,isEmbeddingsLoading:i,embeddingsLoaded:u,openAlert:r,openWarning:l,infoAlert:d,openDocClearAlert:x,handleCloseModal:y,handleSubmitFile:m,handleFileUpload:v,handleAlertClose:p,deleteEmbeddings:w,openSnackbar:g,snackbarMessage:D,handleSnackbarClose:C}){return e.jsxs("div",{children:[e.jsx(Nt,{open:s,onClose:y,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(T,{className:"upload-box",children:[e.jsxs("div",{className:"flex-row-2",children:[e.jsx(te,{id:"modal-modal-title",variant:"h6",component:"h2",sx:{display:"inline-block",width:"75%"},children:"Upload Document"}),e.jsx(ye,{variant:"text",onClick:y,children:e.jsx(Ht,{})})]}),e.jsxs("form",{onSubmit:m,children:[e.jsxs(T,{sx:{px:2,m:2},children:[e.jsx(Tt,{onDrop:v,children:({getRootProps:f,getInputProps:E})=>e.jsxs(T,{...f(),className:"center-column",sx:{height:360,width:"100%",p:2,border:"1px dashed grey",borderTop:"4px solid #0197f6",borderRadius:"16px"},children:[e.jsx("input",{...E()}),e.jsx(T,{children:a.length>0?e.jsxs(T,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(Et,{style:{fontSize:30,margin:"auto",marginTop:30,marginBottom:10}}),e.jsx(te,{sx:{m:"auto"},children:"Selected file:"}),e.jsx("ul",{children:a.map((P,ne)=>e.jsx("li",{children:P},ne))})]}):e.jsxs(T,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(Ut,{style:{fontSize:30,margin:"auto",marginTop:30,marginBottom:10}}),e.jsx(te,{sx:{m:"auto",textAlign:"center"},children:"Drag and drop a PDF/TXT/DOCX/PPTX/CSV/XLSX file here or Click to browse"}),e.jsx(te,{sx:{m:"auto"},children:"[Total File Size Limit: 10MB]"})]})})]})}),u&&e.jsx(T,{sx:{marginTop:-4,marginLeft:1},children:e.jsx(Xt,{color:"green"})})]}),e.jsxs(T,{sx:{py:4},children:[e.jsx(te,{variant:"h6"}),e.jsx(Pt,{})]}),e.jsxs("div",{className:"flex-row-2",children:[e.jsx(T,{className:"center-column",sx:{display:"inline-block",width:"75%"},children:e.jsx(ye,{variant:"contained",type:"submit",sx:{width:200},children:"Submit"})}),e.jsx(T,{sx:{display:"inline-block"},onClick:w,children:e.jsx(le,{title:"Delete File",placement:"top",children:e.jsx(ye,{children:e.jsx(Wt,{color:"red"})})})})]})]}),e.jsx(Mt,{sx:{color:"#fff",zIndex:f=>f.zIndex.drawer+4},open:i,children:e.jsx(Bt,{color:"inherit"})})]})}),e.jsx(R,{open:r,autoHideDuration:6e3,onClose:p,children:e.jsx(L,{onClose:p,severity:"success",sx:{width:"100%"},children:"File uploaded successfully !"})}),e.jsx(R,{open:l,autoHideDuration:6e3,onClose:p,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(L,{onClose:p,severity:"warning",sx:{width:"100%"},children:"File with maximum size of 10MB is allowed !"})}),e.jsx(R,{open:g,autoHideDuration:4500,onClose:C,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:e.jsx(L,{onClose:C,severity:"error",sx:{width:"100%"},children:D})}),e.jsx(R,{open:x,autoHideDuration:12e3,onClose:p,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(L,{onClose:p,severity:"info",sx:{width:"100%"},children:"*The responses are not being fetched from the document."})}),e.jsx(R,{open:d,autoHideDuration:6e3,onClose:p,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(L,{onClose:p,severity:"info",sx:{width:"100%"},children:"File with size above 5MB takes more time to process, Please be patient !"})})]})}const Tn=({isSideBarOpen:s,promptTemplate:a,setPromptTemplate:i})=>{t.useState(!1);const[u,r]=t.useState(!0),[l,d]=t.useState(window.innerWidth<769),[x,y]=t.useState(!1),m=t.useRef(""),v=t.useRef(null),[p,w]=t.useState(!1),[g,D]=t.useState(!1),[C,f]=t.useState();$t(!1);const[E,P]=t.useState(),[ne,h]=t.useState(void 0),S=t.useRef("GPT3.5");t.useState("GPT3.5"),t.useState(0);const[j,O]=t.useState([]),[I,N]=t.useState(5);t.useRef(!1);const[U,X]=t.useState(!1),[A,F]=t.useState([]),[K,Y]=t.useState([]),[ce,de]=t.useState(!1),[M,oe]=t.useState(!1),[Ge,Te]=t.useState(!1);t.useState({key:"GPT3.5",text:"GPT 3.5"});const[He,Ee]=t.useState(!1),[Ue,Pe]=t.useState(!1),[Xe,Me]=t.useState(!1),[We,Be]=t.useState(!1),W=t.useState(!0),[Z,De]=t.useState([]),[ue,ae]=t.useState(!1),Ve=()=>{g||X(!0)},Je=()=>{X(!1)},Ke=async o=>{o.preventDefault(),de(!0);try{if(K.length>0&&(await Os({files:K})).status==="success"){Te(!0),oe(!0),F([]);const q=K.map(B=>B.name);De(B=>[...B,...q])}}catch(c){console.error("Error uploading files:",c),F([]),c instanceof Error&&(c.message==="try_after_some_time"?(console.error("if try_after_some_time"),V("Please Try after some time"),Q(!0)):c.message==="file_size_error"?(console.error("if file_size_error"),V("Upload small size files, or try with few number of files"),Q(!0)):c.message==="csv_excel_error"?(console.error("if csv_excel:",c),V("Upload Single Excel or CSV File, Cannot be uploaded with multiple files."),Q(!0)):c.message==="csv_excel_already_present_error"?(console.error("if csv_excel_already_present:",c),V("CSV/Excel already uploaded, Clear it and try uploading"),Q(!0)):c.message==="unstructured_data_already_uploaded"?(console.error("if unstructured_data_already_uploaded:",c),V("Delete the previously uploaded files before uploading CSV/Excel, and try uploading"),Q(!0)):(console.error("else:",c),V("Please Try after some time"),Q(!0)))}finally{de(!1)}},[Ye,Ie]=t.useState(!1),$=()=>{Te(!1),Me(!1),Ie(!1),Ee(!1),Pe(!1),ae(!1)},Ae=()=>e.jsxs("div",{className:n.upload,style:{fontSize:"30px",marginLeft:"4px"},children:[e.jsx(kn,{className:g?n.commandButtonDisabled:n.commandButton,onClick:Ve}),e.jsx(Nn,{open:U,embeddingsLoaded:M,isEmbeddingsLoading:ce,fileNames:A,openAlert:Ge,openWarning:Xe,infoAlert:Ye,openDocClearAlert:He,handleCloseModal:Je,handleFileUpload:Ze,handleSubmitFile:Ke,handleAlertClose:$,deleteEmbeddings:tt,openSnackbar:ot,snackbarMessage:at,handleSnackbarClose:it})]}),Ze=o=>{Y([]),F([]);const c=/(\.pdf|\.txt|\.pptx|\.docx|\.csv|\.xlsx)$/i;o.forEach(k=>{if(!c.exec(k.name)){alert("Please upload PDF/TXT/DOCX/PPTX/CSV/XLSX files only");return}if(k.size>10*1e3*1024){Me(!0);return}k.size>5*1e3*1024&&Ie(!0),Y(q=>[...q,k]),F(q=>[...q,k.name])})},et=()=>{i(""),me()},tt=()=>{pe(),Ee(!0),he()},st=()=>{pe(),Pe(!0),he(),ae(!1)},pe=()=>{Y([]),F([]),oe(!1)},he=()=>{De([]),fetch("/delete-folder",{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(o=>o.ok?o.json():o.text().then(c=>{throw new Error(c||"Server responded with an error!")})).then(o=>{console.log("Folder deleted successfully:",o)}).catch(o=>{console.error("Error deleting the folder:",o.message)})};async function nt(){Be(!0),console.log("stopping answer generation")}const ie=async o=>{var c;m.current=o,C&&f(void 0),w(!0),P(void 0),h(void 0);try{const q={history:[...j.map(z=>({user:z[0],bot:z[1].answer})),{user:o,bot:void 0}],approach:M?Ne.DocumentQNA:Ne.General,shouldStream:u,overrides:{modelType:S.current,promptTemplate:a.length===0?void 0:a,suggestFollowupQuestions:x,temperature:I/10}};console.log(q+" as request "),D(!0);const B=await Ls(q);if(!B.body)throw Error("No response body");if(u){let z="",qe={};for await(const G of It(B.body)){if(((c=document.getElementById("stop"))==null?void 0:c.title)=="Continue"){Be(!1);break}if(G.data_points)qe=G;else if(G.choices&&G.choices[0].delta.content){z+=G.choices[0].delta.content;let mt={...qe,answer:z};w(!1),O([...j,[o,mt]])}else G.error&&alert(G.error)}D(!1),pt(""),ht(!1)}else{const z=await B.json();if(B.status>299||!B.ok)throw Error(z.error||"Unknown error");O([...j,[o,z]])}}catch(k){f(k)}finally{w(!1)}},me=()=>{m.current="",C&&f(void 0),P(void 0),h(void 0),O([])};t.useEffect(()=>{var o;return(o=v.current)==null?void 0:o.scrollIntoView({behavior:"smooth"})},[p]);const[ot,Q]=t.useState(!1),[at,V]=t.useState(""),it=(o,c)=>{c!=="clickaway"&&Q(!1)},[rt,lt]=t.useState({hasModAccess:!1}),ct=async()=>{try{const o=await Rs();console.log(o),lt(o)}catch(o){console.log(o)}};t.useEffect(()=>{try{pe(),he()}catch(o){console.log(o)}return ct(),()=>{console.log(rt)}},[]);const dt=()=>{window.open("https://sankyopharma.sharepoint.com/:b:/s/DSTeam_CoE_AIML/ETF4r68T6mtFvor7wgAhrLQBHh-g4dzaSzVvZNef3J4Uug?e=h6eeNO","_blank")},[xe,ut]=t.useState("More Balanced"),ge=o=>{switch(ut(o),o){case"More Creative":N(10);break;case"More Balanced":N(5);break;case"More Precise":N(1);break}},[,J]=t.useState(""),[Fe,pt]=t.useState(""),[fe,ht]=t.useState(!1);return t.useEffect(()=>{const o=()=>{d(window.innerWidth<769)};return window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}},[]),s&&l?null:e.jsxs("div",{className:` ${s?n.shrunk:n.container}`,children:[" ",e.jsx("div",{className:n.chatRoot,children:e.jsxs("div",{className:n.chatContainer,children:[m.current?e.jsxs("div",{className:n.chatMessageStream,children:[j.map((o,c)=>e.jsxs("div",{children:[e.jsx(ke,{message:o[0]}),e.jsx("div",{className:n.chatMessageGpt,children:e.jsx(an,{answer:o[1],onFollowupQuestionClicked:k=>ie(k),showFollowupQuestions:x&&j.length-1===c,isAnswerCompleted:g&&j.length===c+1&&o[0]===m.current,regenerateResponse:j.length===c+1&&o[0]===m.current,regenerateQuestion:o[0]},c)})]},c)),p&&e.jsxs(e.Fragment,{children:[e.jsx(ke,{message:m.current}),e.jsx("div",{className:n.chatMessageGptMinWidth,children:e.jsx(rn,{})})]}),C?e.jsxs(e.Fragment,{children:[e.jsx(ke,{message:m.current}),e.jsx("div",{className:n.chatMessageGptMinWidth,children:e.jsx(ln,{error:C.toString(),onRetry:()=>ie(m.current)})})]}):null,e.jsx("div",{ref:v})]}):e.jsxs("div",{className:n.chatEmptyState,children:[e.jsxs("p",{className:n.disclaimerText,style:{filter:W?"brightness(20)":"brightness(1)"},children:["*ChatDSI is designed to engage in natural language conversations, answer questions, and assist with various tasks but currently cannot access DSI repositories to obtain internally stored information. Since it is an AI-powered assistant, output should always be validated by a human prior to use. Please follow the"," ",e.jsx("span",{onClick:dt,style:{textDecoration:"underline",cursor:"pointer"},children:"ChatDSI Usage Guidelines"})," ","at all times."]}),e.jsxs("div",{className:n.boxesContainerquerySuggestion,children:[e.jsxs("div",{className:n.boxquerySuggestion,onClick:()=>J("Show me an example of R code to run a Kaplan-Meier plot using a survival package."),children:[e.jsx("p",{className:n.querytitle,children:"Coding"}),"“Show me an example of R code to run a Kaplan-Meier plot using a survival package.”"]}),e.jsxs("div",{className:n.hideboxquerySuggestion,onClick:()=>J("Provide an easy-to-read summary of the following article that is no more than 750 words: "),children:[e.jsx("p",{className:n.querytitle,children:"Summarization"}),"“Provide an easy-to-read summary of the following article that is no more than 750 words: ”"]}),e.jsxs("div",{className:n.boxquerySuggestion,onClick:()=>J("Please refine the conclusion of my research paper on the impact of artificial intelligence in drug discovery to make it clearer and emphasize the following findings:"),children:[e.jsx("p",{className:n.querytitle,children:"Writing Assistance"}),"“Please refine the conclusion of my research paper on the impact of artificial intelligence in drug discovery to make it clearer and emphasize the following findings: ”"]}),e.jsxs("div",{className:n.boxquerySuggestion,onClick:()=>J("Explore the possibility of predicting individual health outcomes based on various factors (genetics, lifestyle, medical history). Develop a predictive model that tailors recommendations for personalized healthcare interventions."),children:[e.jsx("p",{className:n.querytitle,children:"Summarization"}),"“Explore the possibility of predicting individual health outcomes based on various factors (genetics, lifestyle, medical history). Develop a predictive model that tailors recommendations for personalized healthcare interventions.”"]}),e.jsxs("div",{className:n.hideboxquerySuggestion,onClick:()=>J("In Excel (Office 365), how do I remove duplicate entries from a column of data? "),children:[e.jsx("p",{className:n.querytitle,children:"Tutoring"}),"“In Excel (Office 365), how do I remove duplicate entries from a column of data?”"]}),e.jsxs("div",{className:n.hideboxquerySuggestion,onClick:()=>J("Create a job description for a Data Analyst to work in [open role] at Daiichi Sankyo."),children:[e.jsx("p",{className:n.querytitle,children:"Creation"}),'"Create a job description for a Data Analyst to work in [open role] at Daiichi Sankyo.”']})]}),e.jsxs("div",{className:n.cylindricalBar,children:[e.jsx("div",{className:n.responseStyle,children:"Select Response Style"}),e.jsxs("div",{className:n.buttonContainer,children:[e.jsx(be,{className:`${n.temperatureButton} ${xe==="More Creative"?n.clicked:""}`,onClick:()=>ge("More Creative"),children:"More Creative"}),e.jsx(be,{className:`${n.temperatureButton} ${xe==="More Balanced"?n.clicked:""}`,onClick:()=>ge("More Balanced"),children:"More Balanced"}),e.jsx(be,{className:`${n.temperatureButton} ${xe==="More Precise"?n.clicked:""}`,onClick:()=>ge("More Precise"),children:"More Precise"})]})]})]}),e.jsx("div",{className:n.chatInput,children:e.jsxs("div",{children:[g&&!p&&e.jsxs("button",{className:n.stopButtonContent,onClick:()=>{nt()},children:[e.jsx("div",{id:"stop",className:n.stopButton,title:`${We?"Continue":"Stop Generate Response"}`,children:e.jsx(Dt,{style:{fontSize:"11px"}})}),e.jsx("div",{className:n.stopText1,style:{color:W?"white":"black"},children:"Stop Responding"})]}),e.jsx(Oe,{fileuploadelement:Ae(),clearchat:me,isLoading:p,lastQuestionRef:m,clearOnSend:!0,disabled:g,onSend:o=>ie(o),placeholder:"Ask me a question...",value:fe?Fe:"",isContent:fe})]})}),e.jsxs("div",{className:n.chatInput,children:[M==!1?e.jsx(e.Fragment,{children:e.jsx(se,{className:n.customPromptMessageResponse,style:{color:W?"white":"black"},children:g&&e.jsxs(e.Fragment,{children:[" ","The response is being generated ",e.jsx("span",{className:n.loadingdots})," "]})})}):e.jsx("div",{className:n.customPromptMessage,children:e.jsxs(se,{className:n.customPromptMessage,style:{color:W?"white":"black",marginBottom:a==""?"0":"-5px",fontSize:"11px"},children:[Z[0].endsWith(".xlsx")?e.jsxs(e.Fragment,{children:[`The responses are being fetched from the document ${Z[0]}.`,e.jsx("span",{onClick:()=>ae(!ue),className:n.guidelines,children:"Guidelines..."}),e.jsx(R,{open:ue,onClose:$,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{marginBottom:"10%"},children:e.jsxs(L,{onClose:$,severity:"info",sx:{width:"100%"},children:[e.jsx(Re,{sx:{fontSize:"11px",fontWeight:"800"},children:"Guidelines to Q&A with Excel File:"}),e.jsx("p",{style:{fontSize:"11px"},children:`• Mention the column name and worksheet name (if multiple columns of the same name are present 
                                                        in other worksheets as well) from which you want the data to be extracted.
                                                        • Mention the worksheet name, in addition to the question in the input.
                                                        • Kindly be more specific about the ask in the input.`})]})})]}):Z[0].endsWith(".csv")?e.jsxs(e.Fragment,{children:[`The responses are being fetched from the document ${Z[0]}.`,e.jsx("span",{onClick:()=>ae(!0),className:n.guidelines,children:"Guidelines..."}),e.jsx(R,{open:ue,onClose:$,anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{marginBottom:"8%"},children:e.jsxs(L,{onClose:$,severity:"info",sx:{width:"100%"},children:[e.jsx(Re,{sx:{fontSize:"11px",fontWeight:"800"},children:"Guidelines to Q&A with CSV File:"}),e.jsx("p",{style:{fontSize:"11px"},children:`• Mention the column name from which you want the data to be extracted.
                                                        • Kindly be more specific about the ask in the input.`})]})})]}):`The responses are being fetched from document ${Z[0]}.`,e.jsx("button",{className:n.clearPrompt,onClick:st,style:{color:W?"white":""},children:e.jsx(se,{children:e.jsx("u",{children:e.jsx("i",{children:"Clear Document"})})})})]})}),a==""?e.jsx("div",{}):!g&&e.jsx("div",{className:n.customPromptMessage,children:e.jsxs(se,{className:n.customPromptMessage,style:{color:W?"white":"",fontSize:"11px",overflow:"hidden"},children:["*Assistant behaviour is being modified by custom prompt.",e.jsx("button",{className:n.clearPrompt,onClick:et,children:e.jsx(se,{children:e.jsx("u",{children:e.jsx("i",{children:"Clear Prompt"})})})})]})}),e.jsx(Oe,{fileuploadelement:Ae(),clearchat:me,isLoading:p,lastQuestionRef:m,clearOnSend:!0,placeholder:"Ask me a question...",disabled:g,onSend:o=>ie(o),value:Fe,isContent:fe}),e.jsx(R,{open:Ue,autoHideDuration:12e3,onClose:$,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(L,{onClose:$,severity:"info",sx:{width:"100%"},children:"*The responses are not being fetched from the document."})})]})]})})]})};$e();const En=()=>{const[s,a]=t.useState(!1),[i,u]=t.useState("");return t.useEffect(()=>{Ft.app.initialize()},[]),e.jsx(qt,{children:e.jsxs(zt,{children:[e.jsx(Le,{path:"/",element:e.jsx(Rt,{to:"/sid"})}),e.jsx(Le,{path:"/sid",element:e.jsx(Tn,{isSideBarOpen:s,promptTemplate:i,setPromptTemplate:u})})]})})};At.createRoot(document.getElementById("root")).render(e.jsx(En,{}));
//# sourceMappingURL=index-04aaba25.js.map
